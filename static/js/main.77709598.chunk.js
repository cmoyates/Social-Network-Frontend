(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{168:function(e,t,n){},169:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),a=n(14),s=n.n(a),i=(n(168),n(21)),r=n(8),l=(n(169),n(42)),u=n(17),p=n(144),j=n(280),f=n(9),d=n.n(f),b=n(15),h=n(78),O=n.n(h),m=n(2),x=function(e){var t=function(){var t=Object(b.a)(d.a.mark((function t(n){var c,o,a,s,i,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=!1,o=null,t.prev=2,t.next=5,fetch("https://fast-coast-04774.herokuapp.com/profiles/email/"+n.profileObj.email);case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,o=s,console.log("Profile Exists!"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.log(t.t0),c=!0;case 17:if(!c){t.next=38;break}return console.log("Creating new Profile..."),t.prev=19,i={user_email:n.profileObj.email,user_name:n.profileObj.name,img_url:n.profileObj.imageUrl},t.next=23,fetch("https://fast-coast-04774.herokuapp.com/profiles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)});case 23:return r=t.sent,t.next=26,r.json();case 26:return(o=t.sent).profiles_following=[o.profile_id],t.next=30,fetch("https://fast-coast-04774.herokuapp.com/profiles/"+o.profile_id,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});case 30:console.log("Profile Created!"),e.setFirstTime(!0),t.next=38;break;case 34:return t.prev=34,t.t1=t.catch(19),console.log(t.t1),t.abrupt("return");case 38:e.setProfile(o),e.setIsAuth(!0),console.log("Login Successful");case 41:case"end":return t.stop()}}),t,null,[[2,13],[19,34]])})));return function(e){return t.apply(this,arguments)}}();return e.isAuth?Object(m.jsx)(u.a,{to:"/feed"}):Object(m.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[Object(m.jsx)("h1",{children:"Welcome to the Social Network!"}),Object(m.jsx)("p",{children:Object(m.jsx)(O.a,{clientId:"399415598384-sgkom02f57l549gtnn877013fg004ke5.apps.googleusercontent.com",buttonText:"Login",onSuccess:t,onFailure:function(e){console.log("Login Failed"),console.log(e)},isSignedIn:!0,cookiePolicy:"single_host_origin"})})]})},g=n(259),v=n(261),C=n(258),k=n(263),w=n(135),y=n.n(w),_=n(134),S=n.n(_),I=n(133),D=n.n(I),P=n(56),N=n.n(P),L=n(260),T=n(262),A=n(283),F=n(253),E=n(256),R=Object(F.a)((function(e){return{cardHeader:{display:"flex",flexDirection:"row",alignItems:"center"},nameText:{paddingLeft:"10px",cursor:"pointer"}}})),M=function(e){var t=R(),n=Object(u.g)(),c=function(t){e.isSinglePostPage||n.push("/profile/"+t.user_id)};return e.commentList.length>0?Object(m.jsx)("div",{children:e.commentList.map((function(e,n){return Object(m.jsxs)("div",{children:[Object(m.jsx)(E.a,{}),Object(m.jsxs)(C.a,{children:[Object(m.jsxs)("div",{className:t.cardHeader,children:[Object(m.jsx)(A.a,{style:{cursor:"pointer"},src:e.user_img,onClick:function(){c(e)}}),Object(m.jsx)("h4",{className:t.nameText,onClick:function(){c(e)},children:e.user_name})]}),Object(m.jsx)(E.a,{}),Object(m.jsx)("p",{children:e.content})]})]},n)}))}):null},H=Object(F.a)({cardHeader:{display:"flex",flexDirection:"row",alignItems:"center"},nameText:{paddingLeft:"10px",cursor:"pointer"},postCard:{margin:20},postDivider:{},deleteButton:{top:"10%"},grow:{flexGrow:1}}),z=function(e){var t=H(),n=Object(u.g)(),o=Object(c.useState)([]),a=Object(r.a)(o,2),s=a[0],i=a[1],l=Object(c.useState)(!1),p=Object(r.a)(l,2),j=p[0],f=p[1];Object(c.useEffect)((function(){i(e.post)}),[]);var h=function(){x||n.push("/profile/"+s.user_id)},O=function(){var t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.post.likes.includes(e.viewer_ID)?e.post.likes=e.post.likes.filter((function(t){return t!==e.viewer_ID})):e.post.likes.push(e.viewer_ID),t.next=3,fetch("https://fast-coast-04774.herokuapp.com/posts/"+e.post.post_id,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e.post)});case 3:n=t.sent,i(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=-1===e.viewer_ID;return Object(m.jsx)("div",{children:Object(m.jsxs)(g.a,{className:t.postCard,onMouseOver:function(){j||e.viewer_ID!==e.post.user_id||f(!0)},onMouseLeave:function(){j&&e.viewer_ID===e.post.user_id&&f(!1)},children:[Object(m.jsxs)(C.a,{children:[Object(m.jsxs)("div",{className:t.cardHeader,children:[Object(m.jsx)(A.a,{style:{cursor:"pointer"},src:e.post.user_img,onClick:h}),Object(m.jsx)("h3",{className:t.nameText,onClick:h,children:e.post.user_name}),Object(m.jsx)("div",{className:t.grow}),j?Object(m.jsx)(L.a,{className:t.deleteButton,onClick:function(){e.deleteCallback()},children:Object(m.jsx)(N.a,{})}):null]}),Object(m.jsx)(E.a,{className:t.postDivider}),Object(m.jsx)("p",{children:e.post.content})]}),Object(m.jsx)(E.a,{className:t.postDivider}),Object(m.jsx)(v.a,{children:Object(m.jsxs)(T.a,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(m.jsxs)(k.a,{size:"small",color:e.post.likes.includes(e.viewer_ID)?"primary":"default",disabled:x,startIcon:Object(m.jsx)(D.a,{}),onClick:function(){O()},children:["Like (",e.post.likes.length,")"]}),Object(m.jsx)(E.a,{orientation:"vertical",flexItem:!0,className:t.postDivider}),Object(m.jsx)(k.a,{size:"small",disabled:x,startIcon:Object(m.jsx)(S.a,{}),onClick:function(){e.commentCallback()},children:"Comment"}),Object(m.jsx)(E.a,{orientation:"vertical",flexItem:!0,className:t.postDivider}),Object(m.jsx)(k.a,{size:"small",startIcon:Object(m.jsx)(y.a,{}),onClick:function(){e.setSnackbarOpen(!0),navigator.clipboard.writeText("https://cmoyates.github.io/Social-Network-Frontend/#/post/"+e.post.post_id)},children:"Share"})]})}),Object(m.jsx)(M,{commentList:e.post.comments.commentList,isSinglePostPage:x})]})})},B=n(264),J=function(e){document.title="Feed";var t=Object(c.useState)([]),n=Object(r.a)(t,2),o=n[0],a=n[1],s=function(){var t=Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fast-coast-04774.herokuapp.com/posts/following/"+e.profile.profile_id);case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,console.log("Posts"),console.log(c),a(c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){s()}),[e.loading]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Feed"}),Object(m.jsx)(k.a,{variant:"contained",color:"primary",size:"medium",onClick:function(){e.setPostDialogOpen(!0)},children:Object(m.jsx)("b",{children:"Post"})}),Object(m.jsxs)(B.a,{maxWidth:"sm",children:[o.map((function(t){return Object(m.jsx)(z,{post:t,viewer_ID:e.profile.profile_id,setSnackbarOpen:e.setSnackbarOpen,deleteCallback:function(){e.setDeletingPost(t),e.setDeleteDialogOpen(!0)},commentCallback:function(){e.setCommentingPost(t),e.setCommentDialogOpen(!0)}},t.post_id)})),Object(m.jsx)("br",{})]})]})},W=function(e){return document.title="Page not found",Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"404: Page not found"})})},G=n(85),U=["component","isAuth"],Y=function(e){var t=e.component,n=e.isAuth,c=Object(G.a)(e,U);return Object(m.jsx)(u.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return n?Object(m.jsx)(t,Object(i.a)({},e)):Object(m.jsx)(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))},V=n(284),K=function(){var e=Object(u.h)().id,t=Object(c.useState)(null),n=Object(r.a)(t,2),o=n[0],a=n[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),l=i[0],p=i[1],j=function(){var t=Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(null),t.next=3,fetch("https://fast-coast-04774.herokuapp.com/posts/"+e);case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,document.title="Social Network",console.log(c),a(c);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){j()}),[e]);var f=function(e,t){"clickaway"!==t&&p(!1)};return o?Object(m.jsxs)("div",{children:[Object(m.jsx)(T.a,{container:!0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(m.jsx)(T.a,{item:!0,children:Object(m.jsx)(z,{post:o,viewer_ID:-1,setSnackbarOpen:p},o.post_id)})}),Object(m.jsx)(V.a,{open:l,autoHideDuration:3e3,onClose:f,message:"Link copied to clipboard",action:Object(m.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:f,children:Object(m.jsx)(N.a,{fontSize:"small"})})})]}):null},q=function(e){var t=Object(u.h)().id,n=Object(c.useState)(null),o=Object(r.a)(n,2),a=o[0],s=o[1],i=Object(c.useState)([]),l=Object(r.a)(i,2),p=l[0],j=l[1],f=function(){var e=Object(b.a)(d.a.mark((function e(){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(null),e.next=4,fetch("https://fast-coast-04774.herokuapp.com/profiles/"+t);case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,document.title=c.user_name,s(c),e.next=12,h();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),s(-1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(d.a.mark((function e(){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fast-coast-04774.herokuapp.com/posts/user/"+t);case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,j(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var n=Object(b.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.profile.profiles_following.includes(parseInt(t))?e.profile.profiles_following=e.profile.profiles_following.filter((function(e){return e!==parseInt(t)})):e.profile.profiles_following.push(parseInt(t)),e.setLoading(!0),n.next=4,fetch("https://fast-coast-04774.herokuapp.com/profiles/"+e.profile.profile_id,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e.profile)});case 4:return n.next=6,e.fetchFollowingProfiles;case 6:e.setLoading(!1);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(c.useEffect)((function(){a&&a.profile_id===parseInt(t)?h():f()}),[t,e.loading]),a?-1===a?Object(m.jsx)(u.a,{to:{pathname:"/404",state:{from:e.location}}}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:a.user_name}),parseInt(t)!==e.profile.profile_id?Object(m.jsx)(k.a,{variant:"outlined",onClick:function(){O()},children:e.profile.profiles_following.includes(parseInt(t))?"Following":"Follow"}):null,Object(m.jsx)(B.a,{maxWidth:"sm",children:p.map((function(t){return Object(m.jsx)(z,{post:t,viewer_ID:e.profile.profile_id,setSnackbarOpen:e.setSnackbarOpen,deleteCallback:function(){e.setDeletingPost(t),e.setDeleteDialogOpen(!0)},commentCallback:function(){e.setCommentingPost(t),e.setCommentDialogOpen(!0)}},t.post_id)}))})]}):null},Q=n(23),X=n(278),Z=n(279),$=n(67),ee=n(12),te=n(266),ne=n(265),ce=n(110),oe=n(267),ae=n(269),se=n(268),ie=n(138),re=n.n(ie),le=n(139),ue=n.n(le),pe=n(140),je=n.n(pe),fe=n(137),de=n.n(fe),be=n(271),he=n(270),Oe=Object(F.a)((function(e){return{listIcon:{minWidth:"1px",paddingLeft:"13px"},popupPaper:{}}})),me=function(e){var t=Oe();return Object(m.jsx)(oe.a,{open:e.open,anchorEl:e.anchorEl,role:void 0,transition:!0,disablePortal:!0,children:function(n){var c=n.TransitionProps,o=n.placement;return Object(m.jsx)(ne.a,Object(i.a)(Object(i.a)({},c),{},{style:{transformOrigin:"bottom"===o?"center top":"center bottom"},children:Object(m.jsx)(ce.a,{className:t.popupPaper,children:Object(m.jsx)(te.a,{onClickAway:e.handleClose,children:Object(m.jsxs)(se.a,{autoFocusItem:e.open,id:"menu-list-grow",children:[Object(m.jsxs)(ae.a,{onClick:function(){e.feedClick()},children:[Object(m.jsx)(he.a,{children:"Feed"}),Object(m.jsx)(be.a,{className:t.listIcon,children:Object(m.jsx)(de.a,{})})]}),Object(m.jsxs)(ae.a,{onClick:function(){e.messagesClick()},children:[Object(m.jsx)(he.a,{children:"Messages"}),Object(m.jsx)(be.a,{className:t.listIcon,children:Object(m.jsx)(re.a,{})})]}),Object(m.jsxs)(ae.a,{onClick:function(){e.followingClick()},children:[Object(m.jsx)(he.a,{children:"Following"}),Object(m.jsx)(be.a,{className:t.listIcon,children:Object(m.jsx)(ue.a,{})})]}),Object(m.jsx)(h.GoogleLogout,{clientId:"399415598384-sgkom02f57l549gtnn877013fg004ke5.apps.googleusercontent.com",render:function(e){return Object(m.jsxs)(ae.a,{onClick:e.onClick,disabled:e.disabled,children:[Object(m.jsx)(he.a,{children:"Logout"}),Object(m.jsx)(be.a,{className:t.listIcon,children:Object(m.jsx)(je.a,{})})]})},buttonText:"Logout",onLogoutSuccess:e.logout})]})})})}))}})},xe=n(282),ge=n(141),ve=n.n(ge),Ce=n(286),ke=["InputLabelProps","InputProps"],we=Object(F.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(Q.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(Q.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ee.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ee.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Q.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(Q.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(Q.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),ye=function(e){var t=we(),n=Object(u.g)(),o=Object(c.useState)(""),a=Object(r.a)(o,2),s=a[0],l=a[1],p=Object(c.useState)(!1),j=Object(r.a)(p,2),f=j[0],d=j[1];return Object(m.jsxs)("div",{className:t.search,children:[Object(m.jsx)("div",{className:t.searchIcon,children:Object(m.jsx)(ve.a,{})}),Object(m.jsx)(xe.a,{id:"free-solo-2-demo",disableClearable:!0,options:e.profiles,getOptionLabel:function(e){return e.user_name},open:f,onOpen:function(){s.length>0&&d(!0)},onClose:function(){return d(!1)},inputValue:s,onInputChange:function(e,t){l(t),d(t.length>0)},onChange:function(e,t){n.push("/profile/"+t.profile_id)},popupIcon:null,style:{hasPopupIcon:!1,hasClearIcon:!1},renderInput:function(e){e.InputLabelProps,e.InputProps;var n=Object(G.a)(e,ke);return Object(m.jsx)(Ce.a,Object(i.a)(Object(i.a)({},e.InputProps),{},{className:null,placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"}},n))}})]})},_e=n(272),Se=n(277),Ie=n(274),De=n(273),Pe=n(216),Ne=n(217),Le=n(275),Te=n(276),Ae=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),o=(n[0],n[1]),a=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.profile.profiles_following.includes(parseInt(n))?e.profile.profiles_following=e.profile.profiles_following.filter((function(e){return e!==parseInt(n)})):e.profile.profiles_following.push(parseInt(n)),o(!0),t.next=4,fetch("https://fast-coast-04774.herokuapp.com/profiles/"+e.profile.profile_id,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e.profile)});case 4:return t.next=6,e.fetchFollowingProfiles;case 6:o(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)(_e.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(De.a,{id:"form-dialog-title",children:"Congrats on the new account!"}),Object(m.jsxs)(Ie.a,{children:[Object(m.jsx)($.a,{align:"center",children:"Here are some people to follow"}),Object(m.jsx)(ce.a,{style:{maxHeight:200,overflow:"auto"},children:Object(m.jsx)(Pe.a,{children:e.profiles.map((function(t,n){return t.profile_id===e.profile.profile_id?null:Object(m.jsxs)(Ne.a,{style:{minWidth:"300px"},children:[Object(m.jsx)(Le.a,{children:Object(m.jsx)(A.a,{src:t.img_url})}),Object(m.jsx)(he.a,{primary:t.user_name}),Object(m.jsx)(Te.a,{children:Object(m.jsx)(k.a,{variant:"outlined",onClick:function(){a(t.profile_id)},children:e.profile.profiles_following.includes(t.profile_id)?"Following":"Follow"})})]},n)}))})})]}),Object(m.jsx)(Se.a,{children:Object(m.jsx)(k.a,{onClick:function(){e.handleClose()},color:"primary",children:"Cancel"})})]})},Fe=n(281);var Ee,Re=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],a=n[1];return Object(m.jsx)("div",{children:Object(m.jsxs)(_e.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(De.a,{id:"form-dialog-title",children:e.comment?"Comment":"Post"}),Object(m.jsx)(Ie.a,{children:Object(m.jsx)(Fe.a,{value:o,onChange:function(e){a(e.target.value)},autoFocus:!0,margin:"dense",id:"content",label:"Content",fullWidth:!0,multiline:!0})}),Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(k.a,{onClick:Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleSubmit({user_id:e.profile.profile_id,user_name:e.profile.user_name,user_img:e.profile.img_url,content:o});case 2:a("");case 3:case"end":return t.stop()}}),t)}))),color:"primary",children:"Submit"}),Object(m.jsx)(k.a,{onClick:function(){e.handleClose(),a("")},color:"primary",children:"Cancel"})]})]})})},Me=function(e){return Object(m.jsxs)(_e.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(De.a,{id:"form-dialog-title",children:"Are you sure you want to delete this post?"}),Object(m.jsxs)(Ie.a,{children:['"',e.post?e.post.content:null,'"']}),Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(k.a,{onClick:Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleClose(),t.next=3,e.handleDelete();case 3:case"end":return t.stop()}}),t)}))),color:"primary",children:"Yes"}),Object(m.jsx)(k.a,{onClick:function(){e.handleClose()},color:"primary",children:"No"})]})]})},He=function(e){var t=1===e.profiles.length;return Object(m.jsxs)(_e.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(De.a,{id:"form-dialog-title",children:t?"You're not following anyone!":e.title}),Object(m.jsx)(Ie.a,{children:t?Object(m.jsxs)("div",{children:[Object(m.jsx)($.a,{align:"center",children:"Try typing some names into the searchbar!"}),Object(m.jsx)($.a,{align:"center"})]}):Object(m.jsx)(ce.a,{style:{maxHeight:300,overflow:"auto"},children:Object(m.jsx)(Pe.a,{children:e.profiles.map((function(t,n){return t.profile_id===e.profile.profile_id?null:Object(m.jsxs)(Ne.a,{button:!0,onClick:function(){e.handleClose(),e.clickCallback(t)},children:[Object(m.jsx)(Le.a,{children:Object(m.jsx)(A.a,{src:t.img_url})}),Object(m.jsx)(he.a,{primary:t.user_name})]},n)}))})})}),Object(m.jsx)(Se.a,{children:Object(m.jsx)(k.a,{onClick:function(){e.handleClose()},color:"primary",children:"Close"})})]})},ze=Object(F.a)((function(e){return{grow:{flexGrow:1},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(Q.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(Q.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ee.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ee.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Q.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}})),Be=function(e){var t=ze(),n=Object(u.g)(),o=Object(c.useState)(!1),a=Object(r.a)(o,2),s=a[0],i=a[1],l=Object(c.useState)(!1),p=Object(r.a)(l,2),j=p[0],f=p[1],h=Object(c.useState)(!1),O=Object(r.a)(h,2),x=O[0],g=O[1],v=Object(c.useState)([]),C=Object(r.a)(v,2),k=C[0],w=C[1],y=Object(c.useState)([]),_=Object(r.a)(y,2),S=_[0],I=_[1],D=Object(c.useState)(null),P=Object(r.a)(D,2),T=P[0],F=P[1],E=Object(c.useState)(!1),R=Object(r.a)(E,2),M=R[0],H=R[1],z=Object(c.useState)(!1),B=Object(r.a)(z,2),J=B[0],W=B[1],G=Object(c.useState)(!1),U=Object(r.a)(G,2),Y=U[0],K=U[1],q=Object(c.useState)(null),Q=Object(r.a)(q,2),ee=Q[0],te=Q[1],ne=Object(c.useState)(!1),ce=Object(r.a)(ne,2),oe=ce[0],ae=ce[1],se=Object(c.useState)(!1),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],ue=Object(c.useState)(!1),pe=Object(r.a)(ue,2),je=pe[0],fe=pe[1],de=Object(c.useState)(null),be=Object(r.a)(de,2),he=be[0],Oe=be[1],xe=Object(c.useState)([]),ge=Object(r.a)(xe,2),ve=ge[0],Ce=ge[1],ke=Object(c.useState)(null),we=Object(r.a)(ke,2),_e=we[0],Se=we[1],Ie=Object(c.useState)(!1),De=Object(r.a)(Ie,2),Pe=(De[0],De[1],Object(c.useRef)(null)),Ne=function(){var e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fast-coast-04774.herokuapp.com/profiles");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,w(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var t=Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fast-coast-04774.herokuapp.com/profiles/following/"+e.profile.profile_id);case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,I(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Te=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!1),e.next=3,fetch("https://fast-coast-04774.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});case 3:g(!x);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!1),T.comments.commentList.push(t),e.next=4,fetch("https://fast-coast-04774.herokuapp.com/posts/"+T.post_id,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(T)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fast-coast-04774.herokuapp.com/posts/"+ee.post_id,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:g(!x);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(e,t){"clickaway"!==t&&K(!1)},Je=function(){var t=Object(b.a)(d.a.mark((function t(n){var c,o,a,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=[n,e.profile].sort((function(e,t){return e.profile_id-t.profile_id})),o={room_name:"".concat(c[0].profile_id,"-").concat(c[1].profile_id),participants:c},t.next=4,fetch("https://fast-coast-04774.herokuapp.com/chats/room/"+o.room_name,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 4:return a=t.sent,t.prev=5,t.next=8,a.json();case 8:s=t.sent,console.log("You already have a chat with this person"),t.next=24;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,fetch("https://fast-coast-04774.herokuapp.com/chats",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});case 16:return i=t.sent,t.next=19,i.json();case 19:return s=t.sent,t.next=22,We();case 22:Se(s),Se(null);case 24:Oe(s);case 25:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),We=function(){var t=Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fast-coast-04774.herokuapp.com/chats/profile/"+e.profile.profile_id);case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,Ce(c),0!==c.length?Oe(c[0]):console.log("No rooms"),t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){Ne(),Le(),f(!1)}),[]),Object(m.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(m.jsx)("div",{children:Object(m.jsx)(X.a,{position:"static",children:Object(m.jsxs)(Z.a,{children:[Object(m.jsx)($.a,{className:t.title,variant:"h5",noWrap:!0,style:{cursor:"pointer"},onClick:function(){n.push("/feed")},children:"Social Network"}),Object(m.jsx)(ye,{profiles:k}),Object(m.jsx)("div",{className:t.grow}),Object(m.jsx)($.a,{style:{cursor:"pointer"},onClick:function(){n.push("/profile/"+e.profile.profile_id)},children:e.profile.user_name}),Object(m.jsx)(L.a,{className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){i(!s)},ref:Pe,"aria-controls":void 0,"aria-haspopup":"true",children:Object(m.jsx)(A.a,{src:e.profile.img_url})})]})})}),Object(c.cloneElement)(e.page,{setDeletingPost:te,setDeleteDialogOpen:ae,setCommentingPost:F,setCommentDialogOpen:W,setPostDialogOpen:H,setSnackbarOpen:K,setNewChatDialogOpen:fe,currentChat:he,setCurrentChat:Oe,chats:ve,fetchChats:We,newChat:_e,loading:x,setLoading:g,fetchFollowingProfiles:Le}),Object(m.jsx)(me,{open:s,anchorEl:Pe.current,handleClose:function(e){Pe.current&&Pe.current.contains(e.target)||i(!1)},followingClick:function(){i(!1),le(!0)},feedClick:function(){n.push("/feed/")},messagesClick:function(){n.push("/messages/")},logout:function(){console.log("Logout Successful"),e.setProfile([]),e.setIsAuth(!1)}}),Object(m.jsx)(Ae,{open:j,handleClose:function(){f(!1)},profiles:k,profile:e.profile,fetchFollowingProfiles:Le}),Object(m.jsx)(Re,{comment:!1,open:M,handleClose:function(){H(!1)},handleSubmit:Te,profile:e.profile}),Object(m.jsx)(Re,{comment:!0,open:J,handleClose:function(){W(!1)},handleSubmit:Fe,profile:e.profile,post:T}),Object(m.jsx)(Me,{post:ee,open:oe,handleClose:function(){ae(!1)},handleDelete:Ee}),Object(m.jsx)(He,{title:"These are the people you follow:",profile:e.profile,open:re,handleClose:function(){le(!1)},profiles:S,clickCallback:function(e){n.push("/profile/"+e.profile_id)}}),Object(m.jsx)(He,{title:"Pick someone to chat with:",profile:e.profile,open:je,handleClose:function(){fe(!1)},profiles:S,clickCallback:function(e){Je(e)}}),Object(m.jsx)(V.a,{open:Y,autoHideDuration:3e3,onClose:Be,message:"Link copied to clipboard",action:Object(m.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:Be,children:Object(m.jsx)(N.a,{fontSize:"small"})})})]})},Je=n(145),We=n(4),Ge=n(108),Ue=n.n(Ge),Ye=n(143),Ve=n.n(Ye),Ke=n(142),qe=n.n(Ke),Qe=n(285),Xe=Object(F.a)((function(e){return{outerDiv:{flex:1,display:"flex",overflow:"auto",flexDirection:"row"},innerDiv:{display:"flex",overflow:"auto",flexDirection:"column"},listDiv:{display:"flex",minHeight:"min-content",flexDirection:"column"},localMessage:{backgroundColor:e.palette.primary.main,color:"#fff",border:"2px solid ".concat(e.palette.primary.main),borderRadius:"5px",padding:"5px"},message:{border:"2px solid #dedede",borderRadius:"5px",padding:"5px"},sidebar:Object(Q.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),drawer:{width:"75vw"},openDrawerButton:Object(Q.a)({display:"block"},e.breakpoints.up("sm"),{display:"none"})}})),Ze=function(e){var t=Object(c.useRef)(null),n=Xe(),o=Object(c.useState)(""),a=Object(r.a)(o,2),s=a[0],i=a[1],l=Object(c.useState)([]),u=Object(r.a)(l,2),p=u[0],j=u[1],f=Object(c.useState)(""),d=Object(r.a)(f,2),b=d[0],h=d[1],O=Object(c.useState)(0),x=Object(r.a)(O,2),g=x[0],v=x[1],C=Object(c.useState)(!1),k=Object(r.a)(C,2),w=k[0],y=k[1],_="https://fast-coast-04774.herokuapp.com";Object(c.useEffect)((function(){if(0!==e.chats.length){Ee=qe()(_),h(e.currentChat.participants.find((function(t){return t.profile_id!==e.profile.profile_id})).user_name.split(" ")[0]);var t=e.profile.user_name,n=e.currentChat.room_name,c=e.profile.profile_id;return Ee.emit("join",{name:t,profile_id:c,room:n},(function(t){t&&alert(t),console.log("Joined ".concat(n)),g&&(Ee.emit("newChat",g),v(0)),Ee.on("chatHasBeenMade",(function(){console.log("Message recieved"),e.fetchChats()}))})),function(){Ee.disconnect(),Ee.off()}}e.fetchChats()}),[_,e.currentChat]),Object(c.useEffect)((function(){Ee&&Ee.off("message").on("message",(function(e){j([].concat(Object(Je.a)(p),[e])),t.current&&t.current.scrollIntoView({behaviour:"smooth"})}))}),[p,e.currentChat]),Object(c.useEffect)((function(){j([]),e.currentChat&&j(e.currentChat.messages.messageList)}),[e.currentChat,e.chats]),Object(c.useEffect)((function(){console.log(Ee),e.newChat&&(console.log("Message sent"),v(e.newChat.participants.find((function(t){return t.profile_id!==e.profile.profile_id})).profile_id))}),[e.newChat]);var S=function(t){e.currentChat.room_name!==t.room_name&&(e.currentChat.messages.messageList=p,e.setCurrentChat(t))};return Object(m.jsxs)(c.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[Object(m.jsx)(L.a,{className:n.openDrawerButton,onClick:function(){y(!0)},children:Object(m.jsx)(Ve.a,{})}),Object(m.jsx)("h1",{children:"Messages"}),e.currentChat?Object(m.jsx)(A.a,{style:{marginRight:"10px"},className:n.openDrawerButton,src:e.currentChat.participants.find((function(t){return t.profile_id!==e.profile.profile_id})).img_url}):null]}),Object(m.jsxs)("div",{className:n.outerDiv,children:[Object(m.jsx)(ce.a,{style:{flex:1},className:Object(We.a)(n.innerDiv,n.sidebar),children:Object(m.jsxs)(Pe.a,{className:n.listDiv,children:[Object(m.jsxs)(Ne.a,{button:!0,onClick:function(){e.setNewChatDialogOpen(!0)},children:[Object(m.jsx)(he.a,{children:"Start a new chat"}),Object(m.jsx)(be.a,{children:Object(m.jsx)(Ue.a,{fontSize:"large"})})]}),e.chats.map((function(t,n){var c=t.participants.find((function(t){return t.profile_id!==e.profile.profile_id})),o=e.currentChat&&t.chat_id===e.currentChat.chat_id;return Object(m.jsxs)("div",{children:[Object(m.jsx)(E.a,{}),Object(m.jsxs)(Ne.a,{button:!0,onClick:function(){S(t)},selected:o,children:[Object(m.jsxs)(he.a,{children:["Chat with ",c.user_name]}),Object(m.jsx)(be.a,{children:Object(m.jsx)(A.a,{src:c.img_url})})]})]},n)}))]})}),Object(m.jsxs)(ce.a,{style:{flex:2},className:n.innerDiv,children:[Object(m.jsx)("div",{style:{flex:1},className:n.innerDiv,children:Object(m.jsx)(Pe.a,{className:n.listDiv,children:p.map((function(c,o){var a=c.from_id===e.profile.profile_id;return Object(m.jsx)(Ne.a,{ref:o+1===p.length?t:null,style:{display:"flex",justifyContent:"flex-".concat(a?"end":"start")},children:Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-".concat(a?"end":"start")},children:[Object(m.jsx)("div",{className:a?n.localMessage:n.message,children:c.text}),Object(m.jsx)("div",{style:{fontSize:"0.75em"},children:a?"You":b})]})},o)}))})}),Object(m.jsx)(Fe.a,{id:"outlined-basic",variant:"outlined",onKeyPress:function(e){return"Enter"===e.key?function(e){e.preventDefault(),s&&Ee.emit("sendMessage",s,(function(){return i("")}))}(e):null},value:s,autoComplete:"off",onChange:function(e){return i(e.target.value)},style:{width:"100%"}})]})]}),Object(m.jsx)(Qe.a,{anchor:"left",variant:"temporary",open:w,onClose:function(){y(!1)},children:Object(m.jsxs)(Pe.a,{className:Object(We.a)(n.listDiv,n.drawer),children:[Object(m.jsxs)(Ne.a,{button:!0,onClick:function(){e.setNewChatDialogOpen(!0)},children:[Object(m.jsx)(he.a,{children:"Start a new chat"}),Object(m.jsx)(be.a,{children:Object(m.jsx)(Ue.a,{fontSize:"large"})})]}),e.chats.map((function(t,n){var c=t.participants.find((function(t){return t.profile_id!==e.profile.profile_id})),o=e.currentChat&&t.chat_id===e.currentChat.chat_id;return Object(m.jsxs)("div",{children:[Object(m.jsx)(E.a,{}),Object(m.jsxs)(Ne.a,{button:!0,onClick:function(){S(t),y(!1)},selected:o,children:[Object(m.jsxs)(he.a,{children:["Chat with ",c.user_name]}),Object(m.jsx)(be.a,{children:Object(m.jsx)(A.a,{src:c.img_url})})]})]},n)}))]})})]})};var $e=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(!1),s=Object(r.a)(a,2),f=s[0],d=s[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),O=h[0],g=h[1],v=Object(p.a)({palette:{},backgroundColor:"#000000"});return Object(m.jsx)(j.a,{theme:v,children:Object(m.jsx)(l.a,{children:Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/",component:function(){return Object(m.jsx)(x,{setProfile:o,setIsAuth:d,isAuth:f,setFirstTime:g})}}),Object(m.jsx)(Y,{path:"/Feed",isAuth:f,component:function(e){return Object(m.jsx)(Be,Object(i.a)(Object(i.a)({},e),{},{profile:n,setProfile:o,isAuth:f,setIsAuth:d,firstTime:O,page:Object(m.jsx)(J,{profile:n})}))}}),Object(m.jsx)(Y,{path:"/Messages",isAuth:f,component:function(e){return Object(m.jsx)(Be,Object(i.a)(Object(i.a)({},e),{},{profile:n,setProfile:o,isAuth:f,setIsAuth:d,firstTime:O,page:Object(m.jsx)(Ze,{profile:n})}))}}),Object(m.jsx)(u.b,{exact:!0,path:"/404",component:W}),Object(m.jsx)(u.b,{path:"/post/:id",component:K}),Object(m.jsx)(Y,{path:"/profile/:id",profile:n,isAuth:f,component:function(e){return Object(m.jsx)(Be,Object(i.a)(Object(i.a)({},e),{},{profile:n,setProfile:o,isAuth:f,setIsAuth:d,page:Object(m.jsx)(q,{profile:n})}))}}),Object(m.jsx)(u.a,{to:"/404"})]})})})})},et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,287)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),o(e),a(e),s(e)}))};s.a.render(Object(m.jsx)(o.a.StrictMode,{style:{height:"100%"},children:Object(m.jsx)($e,{style:{height:"100%"}})}),document.getElementById("root")),et()}},[[214,1,2]]]);
//# sourceMappingURL=main.77709598.chunk.js.map